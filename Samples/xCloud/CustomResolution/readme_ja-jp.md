# カスタム解像度のサンプル

*このサンプルは、Microsoft Game Development Kit と互換性があります (2022 年 10 月)。 Xbox Series (Scarlett) ハードウェアでのみ実行することを目的としています。*

## 説明

本体ゲームは通常、特定の解像度でレンダリングされ、ほとんどの場合、16:9 の縦横比でレンダリングされます。 xCloud サービスからゲームをストリーミングする場合、ターゲット デバイスが解像度または縦横比に一致するとは限りません。 現在、ゲームは、デバイスに合わせて文字または柱のボックス化でレンダリングされます。 一部の `XGameStreaming` API を使用すると、ゲームにストリーミング デバイスの寸法を通知することで、解像度を調整したり、ディスプレイに適した解像度でストリーミングするよう xCloud に指示したりすることができます。 このサンプルでは、デバイスの寸法を理解し、レンダリングとストリーミングの解像度を調整するための以下の API の使用方法を示します。

![サンプルのスクリーンショット](./media/rId20.png) ![サンプルのスクリーンショット](./media/rId23.png)

## サンプルの構築

このサンプルは、`Gaming.Xbox.XboxOne.x64` の `Gaming.Xbox.Scarlett.x64` の両プラットフォームを対象にできますが、Xbox Series ハードウェアのみを使用するストリーミング シナリオのため、Xbox Series (Scarlett) ハードウェアでのみ実行することを目的としています。

## サンプルの使用

このサンプルでは、次のコントロールを使用します:

| 操作 | ゲームパッド |
|---|---|
| 解像度メニューの導入 | メニュー |
| カメラの回転/ズーム/調整 | 左スティック/右スティック |
| Xbox ロゴを非表示にする | X |
| サンプルを終了する | ビュー |

このサンプルは、[Web](https://www.xbox.com/play/dev-tools) や [Windows ストリーミング コンテンツ テスト](https://apps.microsoft.com/store/detail/xbox-game-streaming-test-app/9NZBPVPNLDGM) アプリなどのストリーミング クライアントにストリーミングされることを目的としています。 詳細については、以下を参照してください
[ドキュメント](https://learn.microsoft.com/en-us/gaming/gdk/_content/gc/system/overviews/game-streaming/game-streaming-setup-xbox-developer-kit)
開発キットからクライアントへのストリーミングを構成する方法について。

ストリーミングが完了すると、ストリーミング クライアント ディスプレイの現在のサイズに合わせてサンプルが調整されます。 クライアントのサイズを変更すると、新しい寸法に合わせてサンプルの解像度も調整されます。 これが正しく行われていることを確認する方法は、Xbox のロゴ (表示されている場合) と、シーンの中央にある球体の両方が、ディスプレイの縦横比に関係なく、常に完全に丸いことです。

メニューを表示して、サンプルを解像度のプリセット リストのいずれかに設定できます。 対応するボタンを選択して、ストリーミング インスタンスにその解像度でストリーミングするように個別に指示できます。 これは、デバイスのストリーミングの解像度とは無関係に解像度を変更した場合の効果を示すための作為的な分離です。 サイズ変更時に、これは一元的に発生します。

メニューの一部の解像度では、ストリーミングでサポートできる寸法とピクセル数に制限があるため、意図的にエラーがスローされます (たとえば、完全な 4k 解像度でストリーミングすることはできません)。 これは時間の経過と共に変化する可能性があります。

[カスタム解像度を使用したテスト](https://learn.microsoft.com/en-us/gaming/gdk/_content/gc/system/overviews/game-streaming/game-streaming-testing-custom-resolution)の詳細については、ドキュメントを参照してください。

## 実装メモ

このサンプルでは、動的解像度サンプルのシーンと一部の構造体とコードを再利用します。 グラフィックスのベスト プラクティスを示すことを目的としていないため、変更可能だが静的な解像度をサポートするのに不必要なコードが含まれている可能性があります。 これは、時間の経過と共にクリーンアップする必要があります。 重要なのは、メニューから選択した場合のサイズ変更時にレンダリング解像度を調整できるということです。

## 既知の問題

このサンプルでは、2022 年 10 月の GDK とリカバリ、またはそれ以降のバージョンが必要です。

ストリーミング シナリオではそのハードウェアが使用されないため、このサンプルは Xbox One ハードウェア上で実行することを意図していません。

一部の UI は特定の解像度で切断されます。インテリジェントな UI の再構成とサイズ設定は、このサンプルのスコープの一部ではありません。

## 更新の履歴

**2022 年 10 月:** 初期リリース

## プライバシーに関する声明

サンプルをコンパイルして実行する場合、サンプルの使用状況を追跡するために、サンプルの実行可能ファイルのファイル名が Microsoft に送信されます。 このデータ コレクションからオプトアウトするには、Main.cpp の「サンプル使用状況テレメトリ」というラベルの付いたコードのブロックを削除します。

Microsoft のプライバシー ポリシー全般の詳細については、「[Microsoft のプライバシーに関する声明](https://privacy.microsoft.com/en-us/privacystatement/)」を参照してください。


