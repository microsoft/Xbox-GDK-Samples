# HDR10 샘플

*이 샘플은 Microsoft 게임 개발 키트(2022년 3월)와 호환됩니다.*

# 설명

이 샘플은 UHD TV를 HDR 모드로 전환하고 1.0f보다 높은 값의 HDR 씬을 렌더링합니다. 이를 통해 UHD TV에서 하얀색보다 더 밝게 표시됩니다. 이 샘플의 목표는 어떤 API를 사용하는지와 HDR 스왑 체인이 어떻게 생성되는지, 1.0f보다 높은 다양한 값이 UHD TV에서 어떻게 표시되는지 보여주는 것입니다.

![타임라인이 포함된 그림 자동으로 생성된 설명](./media/image1.png)

![자동으로 생성된 텍스트 설명](./media/image2.png)

# 샘플 빌드

Xbox One 개발 키트를 사용하는 경우 활성 솔루션 플랫폼을 `Gaming.Xbox.XboxOne.x64`(으)로 설정합니다.

Xbox Series X|S를 사용하는 경우 활성 솔루션 플랫폼을 `Gaming.Xbox.Scarlett.x64`(으)로 설정합니다.

*자세한 내용은* *GDK 설명서의* __샘플 실행을__ 참조하세요.&nbsp;

# 샘플 사용

이 샘플에서는 다음 컨트롤을 사용합니다.

| 동작 | Gamepad |
|---|---|
| ST.2084 곡선을 표시하는 토글 | A button |
| 페이퍼 화이트 블록만 표시하는 토글 | B 버튼 |
| 페이퍼 화이트의 밝기 조정 | 방향 패드 |
| 값 조정 | 왼쪽/오른쪽 위치 조정 컨트롤 스틱 |
| 끝내기 | 보기 버튼 |

# 구현 참고 사항

이 샘플에서는 API를 사용하여 연결된 디스플레이가 HDR을 지원하는지 확인합니다. HDR이 가능하다면 디스플레이를 HDR 모드로 전환합니다. 값이 1.0f를 초과하는 매우 간단한 HDR 장면은 FP16 백버퍼로 렌더링되며 HDR용과 SDR용, 두 개의 서로 다른 스왑 체인으로 출력됩니다. 소비자가 HDR 디스플레이를 사용하는 경우에도 GameDVR 및 스크린샷에는 SDR 신호가 여전히 필요합니다.

이 샘플에는 HDR 및 SDR 스왑 체인을 모두 지원하는
[DeviceResources](https://github.com/Microsoft/DirectXTK12/wiki/DeviceResources)
클래스 버전이 있습니다.

백서 "[Xbox One의 HDR](http://aka.ms/hdr-on-xbox-one)"을 참조하세요.

지금까지 게임은 Rec.709 색상 원색과 Rec.709 감마 곡선을 사용하여 SDR 신호를 출력했습니다. UHD 디스플레이의 새로운 기능 중 하나는 WCG(Wider Color Gamut)입니다. 이를 사용하려면 새로운 색상 공간 Rec.2020 색상 원색을 사용해야 합니다. UHD 디스플레이의 또 다른 새로운 기능은 HDR(High Dynamic Range)입니다. 이를 사용하려면 다른 곡선인 ST.2084 곡선을 사용해야 합니다. 따라서 HDR 신호를 출력하기 위해서는 ST.2084 곡선과 함께 Rec.2020 색상 원색을 사용해야 합니다.

SDR 신호를 표시하기 위해 HDR 장면에서 1.0f 이상의 모든 값을 간단히 클립하는 단순 톤 매핑 셰이더를 적용하고 Rec.709 색상 원색을 사용하여 8비트 값을 출력합니다. 사용
[PostProcess](https://github.com/Microsoft/DirectXTK12/wiki/PostProcess)
추가 톤 매핑 연산자를 위한 *DirectX 12용 DirectX 도구 키트* 의 클래스입니다.

HDR 신호를 표시하기 위해 셰이더를 사용하여 Rec.709 색상 원색을 Rec.2020 색상 원색으로 회전한 다음, ST.2084 곡선을 적용하여 HDR 디스플레이가 올바르게 표시할 수 있는 10비트 값을 출력합니다. HDR 디스플레이에서 출력의 백색도와 밝기는 "페이퍼 화이트"를 정의하기 위해 선택한 니트 값에 의해 결정됩니다. SDR 사양은 "페이퍼 화이트"를 80니트로 정의하지만 이는 어두운 환경의 영화관용입니다. 오늘날 소비자는 스마트폰용 \~550니트(햇빛 아래에서 볼 수 있도록), PC 모니터용 200~300니트, SDR TV용 120~150니트 등 훨씬 밝은 흰색에 익숙합니다. "페이퍼 화이트"의 니트는 방향 패드의 위/아래를 사용하여 샘플에서 조정할 수 있습니다. 흰색 옆에 밝은 값을 표시하면 눈속임이 가능해지므로 "페이퍼 화이트" 블록만 보려는 경우에는 A 단추를 사용하여 토글할 수 있습니다.

샘플에는 다음의 두 가지 모드가 있습니다.

- 장면에서 특정 값을 사용하여 블록 렌더링

- 특정 밝기 값(니트)을 사용하여 ST.2084 곡선 렌더링

# 알려진 문제

구현은 작동하지만 **HDRAutoToneMapping** 및/또는 **SimpleHDR**의 기술을 사용하여 타이틀에 HDR 이미지만 표시하고 SDR 출력 및 GameDVR은 시스템에서 완전히 처리되도록 할 수도 있습니다.

# 개인정보처리방침

샘플을 컴파일하고 실행하는 경우 샘플 사용량을 추적할 수 있도록 샘플 실행 파일의 파일 이름이 Microsoft에 전송됩니다. 이 데이터 수집을 옵트아웃하려면 Main.cpp에서 "샘플 사용량 원격 분석"이라는 레이블이 지정된 코드 블록을 제거할 수 있습니다.

일반적인 Microsoft의 개인 정보 정책에 대한 자세한 내용은 [Microsoft 개인정보처리방침](https://privacy.microsoft.com/en-us/privacystatement/)을 참조하세요.


