  ![](./media/image1.png)

#   几何延伸示例

此示例与 Microsoft 游戏开发工具包预览版（2019 年 11 月）和 Windows
10"20H1"Insider for PC 兼容

# 说明

本示例演示了网格着色器的几何延伸功能。在示例过程中，将加载大量采样点，然后通过着色器代码将它们延伸为具有代表性的几何形状。它常用于全屏四边形、广告牌精灵、粒子轨迹、移画印花等场景。

使用网格着色器可以确定工作负载如何映射到线程组，以及如何映射到计算着色器以前独有的数据共享工具。这使实现更直观，并可以访问本地几何数据。

![](./media/image3.png)

# 构建示例

如果使用 Project Scarlett，请将活动解决方案平台设置为
Gaming.Xbox.Scarlett.x64。

如果使用电脑且结合使用相应的硬件和 Windows 10
版本，请将活动解决方案平台设置为 Gaming.Desktop.x64。

本示例不支持 Xbox One。

有关详细信息，请参阅 GDK 文档中的"运行示例"。

# 使用示例

除了移动相机之外，唯一的方法是调整粒子通过的正弦波函数的频率和振幅。

# 控件

| 操作                         |  游戏手柄         |  键盘              |
|------------------------------|------------------|-------------------|
| 沿视图矢量旋转/平移相机      |  左操纵杆         |  鼠标滚轮          |
| 沿轨迹移动相机               |  右操纵杆         |  按住 LMB 操作鼠标 |
| 平移相机                     |  方向键           |  WASD 或箭头键     |
| 重置相机                     |  右操纵杆（按）   |  \-                |
| 增加振幅                     |  左肩按钮         |  P                 |
| 减少振幅                     |  左扳机键         |  O                 |
| 提高频率                     |  右肩按钮         |  \+                |
| 降低频率                     |  右扳机键         |  \-                |
| 退出                         |  "视图"按钮       |  ESC 键            |

# 实现说明

由 CPU 模拟的每一帧粒子数据都会被复制到 GPU
资源。然后，网格着色器加载粒子数据（各个采样点），并将其延伸为广告牌上的四边形。由于每个四边形都需要四个顶点和两个基元，因此每个线程需要确定各自负责哪个顶点和基元（如果有）。

# 更新历史记录

2019 年 10 月 31 日 - 创建示例。

# 隐私声明

在编译和运行示例时，示例可执行文件的文件名将发送给
Microsoft，用于帮助跟踪示例使用情况。要选择退出此数据收集，你可以删除
Main.cpp 中标记为"示例使用遥测"的代码块。

有关 Microsoft 的一般隐私策略的详细信息，请参阅《[Microsoft
隐私声明](https://privacy.microsoft.com/en-us/privacystatement/)》。
