![](./media/image1.png)

# 几何扩展示例

*此示例与 Microsoft 游戏开发工具包（2022 年 3 月）和 Windows 10（2004 版）2020 年 5 月更新版兼容*

# 说明

此示例演示网格着色器的几何扩展功能。 这是一种通过着色器代码来加载采样点并在程序上扩展为具有代表性的几何的过程。 常见情况包括全屏四边形、广告牌式画面、粒子痕迹、贴花等。

网格着色器能够确定工作负载如何映射到线程组，以及以前计算着色器所特有的数据共享设施。 这样可以更直观地实现和访问本地几何数据。

![](./media/image3.png)

# 生成示例

如果使用 Xbox Series X|S 开发工具包，请将可用解决方案平台设置为 `Gaming.Xbox.Scarlett.x64`。

如果使用具有相应硬件和 Windows 10 版本的电脑，请将可用解决方案平台设置为 `Gaming.Desktop.x64`。

此示例不支持 Xbox One。

*有关更多信息，请参阅*&nbsp;__运行示例__（位于 *GDK&nbsp;文档）中。*

# 使用示例

除了移动相机之外，还有一些选项可用于操作粒子模拟的动力学属性。

# 控件

| 操作 | 游戏板 | 键盘 |
|---|---|---|
| 沿视图向量旋转/转换相机 | 左控制杆 | 鼠标滚轮 |
| 旋转相机 | 右控制杆 | 按住 LMB + 鼠标 |
| 平移相机 | 方向键 | WASD 或箭头键 |
| 重置摄像头 | 右控制杆（推） | \- |
| 增加/减少生成率 | 左肩键/扳机键 | +/- |
| 提高/降低初始速度 | 右侧肩/扳机键 | O/P |
| 增加/减少 弹性系数 | X/Y | K/L |
| 增加/减小拖动因子 | A/B | N/M |
| 退出 | &ldquo;视图&rdquo;按钮 | 退出 |

# 实现说明

每帧粒子数据都在 CPU 上进行模拟，并复制到 GPU 资源中。 然后，网格着色器会加载粒子数据（单个采样点），并将其扩展到广告牌四边形。 由于每个四边形需要四个顶点和两个基元，因此每个线程都要确定自己负责的顶点和基元。

# 更新历史记录

2019/10/31 -- 示例创建。

2020/4/28 - 已更新为使用 D3DX12 帮助程序创建网格着色器管道

2021/10/29 -- 着色器漏洞修复，物理动力学改进、着色器轻微优化

# 隐私声明

在编译和运行示例时，将向 Microsoft 发送示例可执行文件的文件名以帮助跟踪示例使用情况。 若要选择退出此数据收集，你可以删除 Main.cpp 中标记为&ldquo;示例使用遥测&rdquo;的代码块。

有关 Microsoft 的一般隐私策略的详细信息，请参阅 [Microsoft 隐私声明](https://privacy.microsoft.com/en-us/privacystatement/)。


