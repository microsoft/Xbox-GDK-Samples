![](./media/image1.png)

# DXR 삼각형 샘플

*이 샘플은 Microsoft 게임 개발 키트(2022년 3월) 및 Windows 10(버전 1903) 2019년 5월 업데이트와 호환됩니다.*

# 설명

이 샘플은 DXR API의 기본 사용법을 보여줍니다. 이 샘플은 RTPSO(광선 추적 파이프라인 상태 개체), 셰이더 테이블 및 최상위/최하위 수준 가속 구조를 만듭니다. 또한 광선 생성, 가장 가까운 적중, 모든 적중 및 누락 셰이더뿐 아니라 최하위 수준 가속 구조 인스턴스화를 사용하는 방법도 보여 줍니다.

![](./media/image3.png)

# 샘플 빌드

Project Scarlett을 사용하는 경우 활성 솔루션 플랫폼을 `Gaming.Xbox.Scarlett.x64`(으)로 설정합니다.

적절한 하드웨어 및 Windows 10 릴리스가 설치된 PC를 사용하는 경우 활성 솔루션 플랫폼을 `Gaming.Deskop.x64`(으)로 설정합니다.

이 샘플은 Xbox One을 지원하지 않습니다.

*GDK 설명서의* __샘플 실행__에서 *자세한 내용을 참조하세요.*

# 샘플 사용

클래식한 'SimpleTriangle'을 가져와 광선 추적 시대로 가져오면 구성 가능한 수의 삼각형이 화면을 가로질러 미끄러지며 이동합니다. 키보드/게임 패드에서 A 버튼을 누르면 모든 적중 셰이더 사용을 켜고 끌 수 있습니다. 각각의 삼각형을 관통하는 구멍을 뚫어 뒤에 있는 삼각형이 보이게 할 수 있습니다.

# 컨트롤

| 동작 | Gamepad | 키보드 |
|---|---|---|
| 모든 적중 셰이더 토글 | A | A |
| 삼각형의 \# 증가 | 방향 패드 위로 | \+ |
| 삼각형의 \# 감소 | 방향 패드 아래로 | \- |
| 구멍 크기 늘리기 | 오른쪽 트리거 | W |
| 구멍 크기 줄이기 | 왼쪽 트리거 | S |
| 끝내기 | 보기 버튼 | ESC |

# 구현 참고 사항

샘플은 'CreateStateObject' API를 사용하여 RTPSO(광선 추적 파이프라인 상태 개체)를 만드는 것으로 시작합니다. RTPSO는 가장 가까운 적중 셰이더와 모든 적중 셰이더로 구성된 하나의 적중 그룹을 포함하고 있습니다. 재귀 수준 및 광선 페이로드 크기와 같은 다른 구성 속성도 지정됩니다.

BLAS(하위 수준 가속 구조)는 하나의 삼각형으로 구성되며 현재 선택한 삼각형 수에 따라 TLAS(최상위 가속 구조)에 1~10번으로 인스턴스화됩니다. 각 인스턴스는 장면에서 고유한 위치와 크기를 받습니다. 어느 하나를 사용하려고 할 때에는 기본적으로 TLAS와 BLAS가 모두 PIX 캡처에 표시되도록 모든 프레임을 빌드합니다. 그러나 배송 타이틀에서는 일반적으로 모든 프레임마다 TLAS만 다시 빌드하고 오랜 시간 동안(거의 영원히) BLAS를 다시 사용하려고 합니다.

광선 생성 셰이더는 Z축을 따라 보이는 단순한 직각 투영을 설정하고 DispatchRays 호출에서 시작된 스레드마다 하나의 광선을 발사합니다.

누락 셰이더는 DispatchRays 호출 전에 UAV를 검은색으로 미리 지우는 대신 모든 삼각형이 누락되는 모든 광선에 대해 호출되며 UAV에 검은색을 씁니다.

가장 가까운 적중 셰이더는 무게중심 좌표를 계산하여 픽셀의 최종 색상으로 사용합니다.

모든 적중 셰이더는 무게중심 좌표 공간에서 삼각형 중심(0.333, 0.333, 0.333)과의 단순 거리를 계산하여 거리가 일부 허용 오차보다 작은 경우 적중을 무시하도록 요청합니다. 이 경우, 광선이 삼각형을 통과하여 z 축을 따라 위치한 다른 삼각형을 칠 가능성도 있습니다.

# 업데이트 기록

2019년 11월 1일 -- 샘플 만들기.

# 개인정보처리방침

샘플을 컴파일하고 실행하는 경우 샘플 사용량을 추적할 수 있도록 샘플 실행 파일의 파일 이름이 Microsoft에 전송됩니다. 이 데이터 수집을 옵트아웃하려면 Main.cpp에서 "샘플 사용량 원격 분석"이라는 레이블이 지정된 코드 블록을 제거할 수 있습니다.

일반적인 Microsoft의 개인 정보 정책에 대한 자세한 내용은 [Microsoft 개인정보처리방침](https://privacy.microsoft.com/en-us/privacystatement/)을 참조하세요.


