![](./media/image1.png)

# Deferred Particles

*이 샘플은 Microsoft 게임 개발 키트와 호환됩니다(2022년 3월).*

# 설명

이 DirectX 12 샘플에서는 진행 또는 지연된 방식으로 조명된 연기 입자를 렌더링하는 방법을 보여줍니다. 지연된 경로를 사용하는 경우 각 입자의 법선, 불투명도 및 색이 지연된 버퍼에 누적됩니다. 결과는 조명되고 최종 패스의 원본 장면에 합성됩니다.

![](./media/image2.jpeg)

# 샘플 빌드

Xbox One 개발 키트를 사용하는 경우 활성 솔루션 플랫폼을 `Gaming.Xbox.XboxOne.x64`(으)로 설정합니다.

Xbox Series X|S 개발 도구를 사용하는 경우 활성 솔루션 플랫폼을 `Gaming.Xbox.Scarlett.x64`(으)로 설정합니다.

*GDK 설명서의* __샘플 실행__에서 *자세한 내용을 알아보세요.*

# 샘플 사용

이 샘플에서는 다음 컨트롤을 사용합니다.

| 동작 | Gamepad |
|---|---|
| 샘플 종료 | 선택 |
| 카메라 이동 | 왼쪽 및 오른쪽 스틱 |
| 진행/지연 토글 | &ldquo;A&rdquo; 버튼 |
| 시뮬레이션 일시 중지 | &ldquo;X&rdquo; 버튼 |

# 구현 참고 사항

입자 시뮬레이션 자체는 CPU에서 수행됩니다. 결과 입자 위치는 렌더링을 위해 각 프레임의 GPU 메모리에 복사됩니다. 메모리는 CPU 쓰기 가능 GPU 읽기 가능한 업로드 힙에 커밋된 일시적인 D3D12 리소스 내에서 하위 할당됩니다. 이 메모리에 대한 GPU 가상 주소는 `D3D12_VERTEX_BUFFER_VIEW` 및 `ID3D12GraphicsCommandList::IASetVertexBuffers(...)`을(를) 사용하여 꼭짓점 버퍼로 직접 참조됩니다.

진행 및 지연의 두 가지 렌더링 모드를 사용할 수 있습니다. 진행 경로에서 입자는 장면에 직접 렌더링됩니다. 지연 경로를 따르는 경우 입자 데이터는 두 개의 지연된 버퍼(일반 맵 및 불투명/색상 맵)로 누적됩니다. 입자 렌더링이 완료되면 지연된 버퍼를 사용하여 입자에 광원을 적용하고 이를 다시 기본 장면으로 합성합니다.

입자에 적용되는 광원은 장면 광원(단일 방향 광원) 이외에도 폭발 내부에서 자체적으로 발생하는 점 광원도 있습니다. 이러한 점 조명은 비방향이므로 입자에 대한 조명 기여도는 방향이 아닌 거리에 대한 이차 낙하를 기반으로 합니다.

# 업데이트 기록

2019년 4월 -- 레거시 Xbox 샘플 프레임워크에서 새 템플릿으로 이식.

# 개인정보처리방침

샘플을 컴파일하고 실행하는 경우 샘플 사용량을 추적할 수 있도록 샘플 실행 파일의 파일 이름이 Microsoft에 전송됩니다. 이 데이터 수집을 옵트아웃하려면 Main.cpp에서 "샘플 사용량 원격 분석"이라는 레이블이 지정된 코드 블록을 제거할 수 있습니다.

일반적인 Microsoft의 개인 정보 정책에 대한 자세한 내용은 [Microsoft 개인정보처리방침](https://privacy.microsoft.com/en-us/privacystatement/)을 참조하세요.


