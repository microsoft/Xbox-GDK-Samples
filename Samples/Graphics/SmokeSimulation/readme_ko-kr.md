  ![](./media/image1.png)

#   연기 시뮬레이션

*이 샘플은 Microsoft 게임 개발 키트 미리 보기와 호환됩니다(2019년
11월).*

# 설명

이 샘플에서는 계산 셰이더 6.0 및 3D 텍스처를 사용하여 기본 3D
Navier-Stokes 흐름 시뮬레이션을 구현하는 방법을 보여 줍니다. 또한 이
샘플에서는 간단한 광선 행진 알고리즘을 사용하여 입체 데이터를 렌더링하는
방법도 보여 줍니다.

![](./media/image3.png)

# 샘플 빌드

Xbox One 개발 키트를 사용하는 경우 활성 솔루션 플랫폼을
Gaming.Xbox.XboxOne.x64로 설정하세요.

Project Scarlett을 사용하는 경우 활성 솔루션 플랫폼을
Gaming.Xbox.Scarlett.x64로 설정하세요.

*자세한 내용은 GDK 문서에서* 샘플 실행하기*를 참조하세요.*

# 샘플 사용

이 샘플은 다음 컨트롤을 사용합니다.

| 작업                            |  게임패드                           |
|---------------------------------|------------------------------------|
| 샘플 종료                       |  선택                               |
| 카메라 회전                     |  오른쪽 스틱                        |
| 송신기 회전                     |  왼쪽 스틱                          |
| 송신기 이동                     |  왼쪽/오른쪽 트리거                 |
| 송신기 방향 재설정              |  X 버튼                             |
| 시뮬레이션 일시 중지 설정/해제  |  A 버튼                             |
| 시뮬레이션 초기화               |  B 버튼                             |

# 구현 참고 사항

**시뮬레이션 기법**

이 샘플에 사용되는 시뮬레이션 기법에 대한 자세한 내용은 GPU Gems 38장
Fast Fluid Dynamics Simulation on the GPU(GPU에서 빠른 유체 움직임
시뮬레이션)을 참조하세요. 이 문서에서는 시뮬레이션 기법을 설명하고 2D
유체에 적용하는 반면, 이 샘플은 이 기법을 3D 데이터로 확장합니다. 이
샘플에서 시뮬레이션은 3D 텍스처에 저장되는 상태인 128x128x128 그리드에서
실행됩니다.

계산 셰이더 5.0을 사용하면 한 번에 모든 3D 텍스처 조각을 직접 조작할 수
있습니다. 이는 업데이트할 3D 텍스처 슬라이스를 지정하는 데 사용할 수
있는 기하 도형 셰이더를 사용하는 대체 전략보다 효율이 더 높습니다.

**렌더링 기법**

시뮬레이션 결과는 특정 시뮬레이션 단계에서 유체의 상태를 나타내는 3D
속도 필드입니다. 속도를 직접 볼 수 없기 때문에 속도 필드에서 전달되는
추적 파티클이 있어야 합니다. 따라서 시뮬레이션 자체에 필요한 모든 3D
텍스처 외에도 이러한 파티클을 저장하는 3D 텍스처도 있습니다. 렌더링
단계에서 이 3D 텍스처가 시각화됩니다.

렌더링할 때 큐브의 앞면을 렌더링합니다. 픽셀 셰이더에서는 눈 위치에서
큐브의 현재 지점까지 광선을 캐스팅하고 고정 간격으로 광선을 따라 직전
단락에 언급된 3D 텍스처를 샘플링하면서 색과 불투명도를 누적합니다.

또한 이 샘플에서는 광선 캐스팅 알고리즘에 대한 간단하지만 효과적인 가속
기법을 보여 줍니다. 시뮬레이션 도중 병렬 감소를 사용하여 1/8 크기의 3D
텍스처가 생성됩니다. 렌더링할 때 원래 3D 텍스처를 고정 간격으로 직접
샘플링하여 빈 공간을 샘플링하느라 많은 시간을 낭비하는 대신, 먼저 이 1/8
크기 3D 텍스처를 샘플링하고 샘플링되는 값이 임계값보다 작으면 공간에서
청크를 생략합니다. 이 기법은 이 샘플의 연기와 같이 3D 텍스처에 저장된
데이터가 스파스일 때 특히 유용합니다.

# 업데이트 기록

2019년 4월 -- 기존 Xbox 샘플 프레임워크에서 새 템플릿으로 포팅

# 개인정보처리방침

샘플을 컴파일하고 실행할 때 샘플 사용을 추적하는 데 도움이 되도록 샘플
실행 파일의 파일 이름이 Microsoft에 전송됩니다. 이 데이터 수집을
옵트아웃하려면 Main.cpp에서 \"샘플 사용 원격 분석\"이라고 레이블이
지정된 코드 블록을 제거할 수 있습니다.

Microsoft의 일반 개인 정보 보호 정책에 대한 자세한 내용은 [Microsoft
개인정보처리방침](https://privacy.microsoft.com/en-us/privacystatement/)을
참조하세요.
