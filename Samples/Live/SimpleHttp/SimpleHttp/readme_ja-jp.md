![](./media/image1.png)

# SimpleHttp サンプル

*このサンプルは、Microsoft GDK (デスクトップ) と GDKX (Xbox) と互換性があります (2022 年 3 月)*

# 説明

このサンプルでは、XCurl を使用して、ユーザー トークンと署名を認証済み Xbox Live 呼び出し用のヘッダーに追加することを含む HTTP 要求を示します。

# サンプルのビルド

サンプルでは、ビルドに特定の変更を必要とせず、XDKS.1 サンドボックスを使用する場合は変更なしで実行する必要があります。

*詳細については、**GDK ドキュメント*の「__サンプルの実行__」を参照してください。

# サンプルの使用方法

サンプルを実行すると、XSTS トークンによる認証を必要とするサービスに HTTPS 経由で要求を送信できます。

HTTPS 呼び出しの場合は、[XBL サービス HTTP 要求] ボタンを使用して現在のユーザー (プロファイル サービス) に関する情報を取得するために、標準の Xbox Live エンドポイントを呼び出すことを選択できます。 これにより、サービスに接続され、Authorization ヘッダーとして XSTS トークンが適切に追加され、Signature ヘッダーが追加されます。

カスタム ゲーム サービスの呼び出しをシミュレートするには、Game Service HTTP 要求を使用できます。この要求により、ゲーム サービスに必要な XSTS トークン認証も追加されます。 これは既定で、実行中のサンプル バージョンのゲーム サービス サンプルを呼び出し、サービスの認証に使用されるユーザーの X トークン内のすべての要求と共に返信されます。 b2b コマース URI を含むその他のサービス機能は、コード内でコメント アウトされた他のオプションでボタンのターゲット URL をオーバーライドすることで、このサンプルでも使用できます。 独自のカスタム Game Service の構成の詳細については、「Game Service のサンプルと構成ガイド」を参照してください。

## メイン画面

![Graphical user interface, text, website Description automatically generated](./media/image3.png)

# 実装メモ

XCurl の使用方法はすべて HttpManager.h/.cpp にあります。 ここでは、次のデモを見つけることができます。

- ネットワークの可用性の待機

- Web サーバーからの HTTPS "GET" 要求の作成

- 一般的な HTTP クエリの作成

詳細な API ノートと使用方法については、XCurl のドキュメントを参照してください。

# 更新履歴

初回リリース 2021 年 4 月

2022 年 6 月 -- 2022 年 3 月 GDK (以降) の互換性

# プライバシーに関する声明

サンプルをコンパイルして実行する場合、サンプルの使用状況を追跡するために、サンプルの実行可能ファイルのファイル名が Microsoft に送信されます。 このデータ コレクションからオプトアウトするには、Main.cpp の "サンプル使用状況テレメトリ" というラベルの付いたコードのブロックを削除します。

Microsoft のプライバシー ポリシー全般の詳細については、「[Microsoft のプライバシーに関する声明](https://privacy.microsoft.com/en-us/privacystatement/)」を参照してください。


