  ![](./media/image1.png)

#   InGameChat サンプル

*このサンプルは、Microsoft ゲーム開発キットのプレビュー (2019 年 11 月)
に対応しています。*

# 

# 説明

この例では、GameChat2 ライブラリを Xbox のタイトルに統合しています。
タイトル内の VOIP
コミュニケーションのデモンストレーションに必要な要素をまとめます:
GameChat、マルチプレイヤー セッション、ピア ネットワーキング。

# サンプルのビルド

Xbox One の devkit を使用している場合は、アクティブなソリューション
プラットフォームを Gaming.Xbox.XboxOne.x64 に設定します。

Project Scarlett を使用している場合は、アクティブなソリューション
プラットフォームを Gaming.Xbox.Scarlett.x64 に設定します。

*詳細については、GDK
ドキュメント*の「サンプルの実行」を*参照してください*。

# サンプルの使用

それぞれマイクとスピーカーを備えた少なくとも 2 つの Xbox One
キットが必要です。
これらは、Kinect、モノラルおよびステレオ用ヘッドセット、TV
スピーカーなどです。 各キットには有効な Xbox Live
ユーザーが必要であり、それが友人の場合に役立ちます。
Xbox、およびユーザー アカウントは、XDKS.1
サンドボックス用に構成する必要があります。

## ![](./media/image3.png)ローカル ロビー

| 動作                                             |  コントローラー    |
|--------------------------------------------------|-------------------|
| ユーザーを招待 したり、ユーザーが参加したりできる独自のチャット セッションを開始する |  A ボタン |
| ソーシャル グラフで開いているチャット セッションを検索する |  X ボタン |

## ![](./media/image4.png)セッションを選択​​する

| 動作                                            |  コントローラー     |
|-------------------------------------------------|--------------------|
| リスト アイテムを選択する                       |  方向パッドの上/下  |
| リストを更新する                                |  X ボタン           |
| 戻る                                            |  B ボタン           |

## チャット セッション

![](./media/image5.png)

| 動作                                   |  コントローラー              |
|----------------------------------------|-----------------------------|
| リストからユーザーを選択する           |  方向パッドの上/下           |
| 選択したユーザーのミュートを切り替える |  A ボタン                    |
| \[統計\] パネルと \[デバッグ\]パネルの切り替え |  X ボタン |
| テキスト メッセージを送信する          |  Y ボタン                    |
| ユーザーを招待する                     |  メニュー ボタン             |
| 戻る                                   |  B ボタン                    |

# 実装に関する注意事項

このサンプルの主な目的は、GameChat2
をタイトルに統合する方法を示すことです。 GameChat2
は、xbox::services::game_chat_2::chat_manager::singleton_instance()
クラスで管理されます。 このクラスは GameChatManager にラップされます。
マネージャーは、GameChat とタイトルの間のインターフェイスです。 ピア
ネットワークとマルチプレイヤー セッション
メンバーのインターフェイスを処理します。

GameChatManager.cpp/.h
ファイルは理解を助けるために呼び出されており、サンプルの主な焦点になります。

残りのコードは、エンドツーエンドの VOIP の実現に役立ちます。
このファイルは、高性能や実稼働環境ではなく、単純明快を求めて書かれています。
サンプルの他の部分を直接使用すること、また、目的以外の標準的な例として使用することはお勧めしません。

# 更新履歴

2019 年 6 月 -- 新規作成
