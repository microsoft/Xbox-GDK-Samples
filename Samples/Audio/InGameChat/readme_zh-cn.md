  ![](./media/image1.png)

#   InGameChat 示例

此示例与 Microsoft 游戏开发工具包预览版（2019 年 11 月）兼容

# 

# 说明

InGameChat 示例提供了一个将 GameChat2 库集成到 Xbox 标题中的工作示例。
它汇集了演示标题中 VOIP 通信所需的部分：
GameChat、多玩家会话和对等网络。

# 构建示例

如果使用 Xbox One 开发工具包，请将活动解决方案平台设置为
Gaming.Xbox.XboxOne.x64。

如果使用 Project Scarlett，请将活动解决方案平台设置为
Gaming.Xbox.Scarlett.x64。

有关详细信息，请参阅 GDK 文档中的"运行示例"。

# 使用示例

至少需要两个 Xbox One 工具包，每个工具包配备一个麦克风和扬声器。 可以是
Kinect、单声道耳机和立体声耳机、电视扬声器等。
每个工具包都需要一个有效的 Xbox Live
用户，如果他们是朋友，这将有所帮助。 应该为 XDKS.1 沙盒配置 Xbox
和用户帐户。

## ![](./media/image3.png)本地会议厅

| 操作                                             |  游戏手柄          |
|--------------------------------------------------|-------------------|
| 开始你自己的聊天会话 ，可在其中邀请用户，或者他们可以加入你的聊天会话 |  A 按钮 |
| 在社交图中搜索打开的聊天会话                     |  X 按钮            |

## ![](./media/image4.png)选择会话

| 操作                                            |  游戏手柄           |
|-------------------------------------------------|--------------------|
| 在列表项之间选择                                |  向上/向下方向键    |
| 刷新数据                                        |  X 按钮             |
| 返回                                            |  B 按钮             |

## 聊天会话

![](./media/image5.png)

| 操作                                   |  游戏手柄                    |
|----------------------------------------|-----------------------------|
| 选择列表中的用户                       |  向上/向下方向键             |
| 为选定用户切换静音                     |  A 按钮                      |
| 在"统计"面板和"调试"面板之间切换       |  X 按钮                      |
| 发送短信                               |  Y 按钮                      |
| 邀请用户                               |  "菜单"按钮                  |
| 返回                                   |  B 按钮                      |

# 实现说明

此示例的主要目的是演示如何将 GameChat2 集成到标题中。 GameChat2 通过
xbox::services::game_chat_2::chat_manager::singleton_instance()
类进行控制。 此类会包装到 GameChatManager 中。 管理器是 GameChat
和标题之间的接口。 它会处理与对等网络和多玩家会话成员的连接。

调用 GameChatManager.cpp/.h 文件是为了帮助理解，应该是本示例的重点。

剩下的代码是为了促进端到端 VOIP。
它编写得简单明了，而不可直接用于提升性能或用于生产。
建议不要直接使用示例的其他部分，也不要将其用作除预期用途之外的规范示例。

# 更新历史记录

2019 年 6 月 -- 创建
