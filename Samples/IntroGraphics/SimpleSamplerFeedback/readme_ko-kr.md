  ![](./media/image1.png)

#   간단한 SamplerFeedback 샘플

*이 샘플은 Microsoft 게임 개발 키트 미리 보기(2019년 11월)와
호환됩니다.*

# 설명

샘플러 피드백은 질감 샘플링 정보 및 위치를 캡처 및 기록하는 Direct3D
기능입니다. 질감 공간 음영 처리 및 질감 스트리밍과 같은 항목에 사용할 수
있습니다. 이 샘플에서는 아주 간단한 샘플러 피드백 구현만 보여 줍니다.

이 샘플에서는 4분면 쪽으로 또는 반대쪽으로 이동할 수 있는 카메라로 질감
4분면을 렌더링합니다. 카메라를 4분면에 가깝에 이동하면 보다 상세한
밉(예: 더 낮은 수준의 밉)이 렌더링 중에 사용됩니다. 샘플러 피드백은 이
정보를 MinMip 피드백 맵에 기록합니다.

참고: 샘플러 피드백은 Xbox One에서 지원되지 않으므로 이 샘플은 Scarlett
전용 샘플입니다.

![](./media/image3.png)

# 샘플 빌드

이 샘플에서는 Scarlett만 지원하므로 활성 솔루션 플랫폼은
Gaming.Xbox.Scarlett.x64가 됩니다.

*자세한 내용은 GDK 문서에서* 샘플 실행하기*를 참조하세요.*

# 샘플 사용

| 작업                                   |  게임패드                    |
|----------------------------------------|-----------------------------|
| 카메라 이동                            |  왼쪽 썸스틱                 |
| 종료                                   |  보기 단추                   |

# 구현 참고 사항

**만들기**

피드백 맵에는 MinMip 및 RegionUsed의 두 가지 형식이 있습니다. 이 샘플은
MinMip 피드백을 구현합니다. 즉,
DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE를 사용하여 만들어집니다.

샘플러 피드백은 일반적으로 바둑판식 리소스에 사용됩니다. 따라서 피드백
맵은 일반적으로 페어링된 바둑판식 질감 크기(64KB 타일당 1텍셀)의 일부로
크기가 지정됩니다. 이 매우 간단한 샘플에서는 1x1 피드백 맵을
만듭니다(예: 전체 질감에 대해 1개의 피드백 맵 값).

피드백 맵을 셰이더에 바인딩하고 일반 질감을 피드백 맵에 페어링하기 위해
API CreateSamplerFeedbackUnorderedAccessView가 사용됩니다.

**장면 렌더링**

장면 렌더링 이전에 피드백 맵을 지워야 합니다. 장면 렌더링 동안 밉 수준
0이 요청되었음을 의미하므로 값 0으로 이 맵을 지울 수 없습니다. 따라서 이
샘플에서는 요청된 밉이 없음을 나타내는 -1 값으로 맵을 지웁니다.

샘플러 피드백 셰이더 명령은 셰이더 모델 6.5에서 지원됩니다. 이 샘플의
픽셀 셰이더는 WriteSamplerFeedback 메서드를 사용합니다. pixelshader.hlsl
파일에는 샘플러 피드백을 에뮬레이트하기 위한 셰이더 코드도 포함되어
있습니다. 이 코드는 샘플러 피드백을 지원하지 않는 플랫폼에 유용할 수
있습니다.

**다시 읽기**

CPU에서 값을 읽으려면 ResolveSubresourceRegion을 사용하여 피드백 맵을
트랜스코딩해야 합니다. 이 샘플은 다시 읽기에 사용되는 다시 읽기 질감을
만듭니다. Scarlett에서 피드백 맵의 값은 5.3 고정점입니다.

# 업데이트 기록

2019년 12월 5일 - 샘플 생성

# 개인정보처리방침

샘플을 컴파일하고 실행할 때 샘플의 사용을 추적하는 데 도움이 되도록 샘플
실행 파일의 파일 이름이 Microsoft에 전송됩니다. 이 데이터 수집을
옵트아웃하려면 Main.cpp에서 \"샘플 사용 원격 분석\"이라고 레이블이
지정된 코드 블록을 제거할 수 있습니다.

Microsoft의 일반 개인정보취급방침에 대한 자세한 내용은 [Microsoft
개인정보처리방침](https://privacy.microsoft.com/en-us/privacystatement/)을
참조하세요.
