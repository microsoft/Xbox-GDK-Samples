![](./media/image1.png)

# 간단한 SamplerFeedback 샘플

*이 샘플은 Microsoft 게임 개발 키트(2020년 6월)와 호환 가능합니다.*

# 설명

샘플러 피드백은 텍스처 샘플링 정보 및 위치를 캡처하고 기록하기 위한 Direct3D 기능입니다. 텍스처 공간 음영 및 텍스처 스트리밍과 같은 작업에 사용할 수 있습니다. 이 샘플은 샘플러 피드백의 매우 간단한 구현만 보여 줍니다.

샘플은 쿼드 쪽으로 또는 멀어지게 이동할 수 있는 카메라로 질감이 있는 쿼드를 렌더링합니다. 카메라가 쿼드에 더 가깝게 이동하면 렌더링 중에 더 높은 세부 밉(즉, 낮은 밉 수준)이 사용됩니다. 샘플러 피드백은 이 정보를 MinMip 피드백 맵에 기록합니다.

참고: 샘플러 피드백은 Xbox One에서는 지원되지 않으므로
| | |
|---|---|
|Xbox Series X|S 전용 샘플입니다.|

![](./media/image3.png)

# 샘플 빌드

플랫폼은 Gaming.Xbox.Scarlett.x64입니다. *GDK 설명서의* __샘플 실행__에서 *자세한 내용을 살펴보세요.*
| | |
|---|---|
|이 샘플은 Xbox Series X|S만 지원하므로 활성 솔루션|


# 샘플 사용

| 동작 | Gamepad |
|---|---|
| 카메라 이동 | 왼쪽 엄지 스틱 |
| 끝내기 | 보기 버튼 |

# 구현 참고 사항

**만들기**

피드백 맵의 형식에는 MinMip과 RegionUsed의 두 가지가 있습니다. 이 샘플에서는 MinMip 피드백(즉, DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE를 사용하여 만든 피드백)을 구현합니다.

샘플러 피드백은 일반적으로 타일식 리소스와 함께 사용됩니다. 따라서 피드백 맵은 일반적으로 쌍을 이루는 타일식 텍스처의 크기(즉, 64KB 타일당 하나의 텍셀)의 분수로 크기가 조정됩니다. 매우 간단한 이 샘플에서는 1x1 피드백 맵(즉, 전체 텍스처에 대한 하나의 피드백 맵 값)을 만듭니다.

피드백 맵을 셰이더에 바인딩하고 일반 텍스처를 피드백 맵에 페어링하려면 API CreateSamplerFeedbackUnorderedAccessView를 사용합니다.

**장면 렌더링**

장면 렌더링 전에 피드백 맵을 지워야 합니다. 값 0으로 지우면 밉 수준 0이 장면 렌더링 중에 요청되었음을 의미하므로 이렇게 할 수는 없습니다. 따라서 샘플에서는 맵을 값 -1로 지우는데, 이는 밉이 요청되지 않았음을 나타냅니다.

샘플러 피드백 셰이더 지침은 셰이더 모델 6.5에서 지원합니다. 이 샘플의 픽셀 셰이더는 WriteSamplerFeedback 메서드를 사용합니다. pixelshader.hlsl 파일에는 샘플러 피드백을 에뮬레이트하는 셰이더 코드도 포함되어 있으며, 이것은 샘플러 피드백을 지원하지 않는 플랫폼에서 유용하게 사용될 수도 있습니다.

**다시 읽기**

CPU의 값을 읽으려면 ResolveSubresourceRegion을 사용하여 피드백 맵을 트랜스코딩해야 합니다. 이 샘플은 다시 읽기 텍스처를 만듭니다.
피드백 맵은 5.3으로 고정된 포인트입니다.
| | |
|---|---|
|다시 읽기에 사용됩니다. Xbox Series X|S의 경우 값은|

# 업데이트 기록

2019/12/05 -- 샘플 만들기.

# 개인정보처리방침

샘플을 컴파일하고 실행하는 경우 샘플 사용량을 추적할 수 있도록 샘플 실행 파일의 파일 이름이 Microsoft에 전송됩니다. 이 데이터 수집을 옵트아웃하려면 Main.cpp에서 "샘플 사용량 원격 분석"이라는 레이블이 지정된 코드 블록을 제거할 수 있습니다.

일반적인 Microsoft의 개인 정보 정책에 대한 자세한 내용은 [Microsoft 개인정보처리방침](https://privacy.microsoft.com/en-us/privacystatement/)을 참조하세요.


